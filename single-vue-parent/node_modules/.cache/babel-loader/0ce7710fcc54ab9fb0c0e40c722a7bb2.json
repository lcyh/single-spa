{"remainingRequest":"/Users/changluo/Desktop/study-notes/single-spa/single-vue-parent/node_modules/babel-loader/lib/index.js!/Users/changluo/Desktop/study-notes/single-spa/single-vue-parent/src/main.js","dependencies":[{"path":"/Users/changluo/Desktop/study-notes/single-spa/single-vue-parent/src/main.js","mtime":1600420410889},{"path":"/Users/changluo/Desktop/study-notes/single-spa/single-vue-parent/node_modules/cache-loader/dist/cjs.js","mtime":1596874153456},{"path":"/Users/changluo/Desktop/study-notes/single-spa/single-vue-parent/node_modules/babel-loader/lib/index.js","mtime":1586237056668}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9jaGFuZ2x1by9EZXNrdG9wL3N0dWR5LW5vdGVzL3NpbmdsZS1zcGEvc2luZ2xlLXZ1ZS1wYXJlbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgIi9Vc2Vycy9jaGFuZ2x1by9EZXNrdG9wL3N0dWR5LW5vdGVzL3NpbmdsZS1zcGEvc2luZ2xlLXZ1ZS1wYXJlbnQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiL1VzZXJzL2NoYW5nbHVvL0Rlc2t0b3Avc3R1ZHktbm90ZXMvc2luZ2xlLXNwYS9zaW5nbGUtdnVlLXBhcmVudC9ub2RlX21vZHVsZXMvY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgIi9Vc2Vycy9jaGFuZ2x1by9EZXNrdG9wL3N0dWR5LW5vdGVzL3NpbmdsZS1zcGEvc2luZ2xlLXZ1ZS1wYXJlbnQvbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICIvVXNlcnMvY2hhbmdsdW8vRGVza3RvcC9zdHVkeS1ub3Rlcy9zaW5nbGUtc3BhL3NpbmdsZS12dWUtcGFyZW50L25vZGVfbW9kdWxlcy9jb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5maW5hbGx5LmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgQXBwIGZyb20gIi4vQXBwLnZ1ZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi9yb3V0ZXIiOwppbXBvcnQgRWxlbWVudFVJLCB7IExvYWRpbmcsIE1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXVpIjsKaW1wb3J0ICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9pbmRleC5jc3MiOwppbXBvcnQgeyByZWdpc3RlckFwcGxpY2F0aW9uLCBzdGFydCwgZ2V0TW91bnRlZEFwcHMsIG5hdmlnYXRlVG9VcmwgfSBmcm9tICJzaW5nbGUtc3BhIjsKVnVlLmNvbmZpZy5wcm9kdWN0aW9uVGlwID0gZmFsc2U7ClZ1ZS51c2UoRWxlbWVudFVJKTsKCmZ1bmN0aW9uIGxvYWRTY3JpcHQoX3gpIHsKICByZXR1cm4gX2xvYWRTY3JpcHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvLyBDb25maWcgd2l0aCBtb3JlIGV4cHJlc3NpdmUgQVBJCgoKZnVuY3Rpb24gX2xvYWRTY3JpcHQoKSB7CiAgX2xvYWRTY3JpcHQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHVybCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICAgICAgICAgICAgc2NyaXB0LnNyYyA9IHVybDsKICAgICAgICAgICAgICBzY3JpcHQub25sb2FkID0gcmVzb2x2ZTsKICAgICAgICAgICAgICBzY3JpcHQub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CiAgcmV0dXJuIF9sb2FkU2NyaXB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCnZhciByZWdpc3RlckFwcGxpY2F0aW9ucyA9IGZ1bmN0aW9uIHJlZ2lzdGVyQXBwbGljYXRpb25zKCkgewogIHJldHVybiByZWdpc3RlckFwcGxpY2F0aW9uKHsKICAgIG5hbWU6ICJhcHAtdnVlLWNoaWxkIiwKICAgIGFwcDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2FwcCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBsb2FkU2NyaXB0KCJodHRwOi8vMTI3LjAuMC4xOjEwMDAwL2pzL2NodW5rLXZlbmRvcnMuanMiKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZFNjcmlwdCgiaHR0cDovLzEyNy4wLjAuMToxMDAwMC9qcy9hcHAuanMiKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIndpbmRvdy5zaW5nbGVWdWUiLCB3aW5kb3cuc2luZ2xlVnVlKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHdpbmRvdy5zaW5nbGVWdWUpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYXBwKCkgewogICAgICAgIHJldHVybiBfYXBwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhcHA7CiAgICB9KCksCiAgICBhY3RpdmVXaGVuOiAiL3Z1ZSIsCiAgICBjdXN0b21Qcm9wczogewogICAgICBzb21lOiAidmFsdWUtLS0iLAogICAgICBwcm9wczogewogICAgICAgIGRhdGE6IHsKICAgICAgICAgIGxpc3Q6IFtdLAogICAgICAgICAgaWQ6ICIxMjEiCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSk7Cn07IC8vIHN0YXJ0KCk7CgoKX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICB2YXIgbG9hZGluZzsKICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgd2hpbGUgKDEpIHsKICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgbG9hZGluZyA9IExvYWRpbmcuc2VydmljZSh7CiAgICAgICAgICAgIGZ1bGxzY3JlZW46IHRydWUsCiAgICAgICAgICAgIHRleHQ6ICLmraPlnKjliJ3lp4vljJbkuK0iCiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgIHJldHVybiByZWdpc3RlckFwcGxpY2F0aW9ucygpOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAvLyDms6jlhozlrZDns7vnu58KICAgICAgICAgIHN0YXJ0KCk7CiAgICAgICAgICBuYXZpZ2F0ZVRvVXJsKCIvdnVlIik7IC8vIOebtOaOpei3s+i9rOWIsOWtkOW6lOeUqAogICAgICAgICAgLy8g5YiH5o2i5a2Q57O757uf55qE5pe25YCZ57uZYm9keeWKoOS4iuWvueW6lOWtkOezu+e7n+eahCBjbGFzcyBuYW1lc3BhY2UKCiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic2luZ2xlLXNwYTphcHAtY2hhbmdlIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygi54i25bqU55SoLWdldE1vdW50ZWRBcHBzIiwgZ2V0TW91bnRlZEFwcHMoKSk7CiAgICAgICAgICAgIHZhciBhcHAgPSBnZXRNb3VudGVkQXBwcygpLnBvcCgpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiZ2V0TW91bnRlZEFwcHMoKSIsIGdldE1vdW50ZWRBcHBzKCkpOwogICAgICAgICAgICB2YXIgaXNBcHAgPSAvXmFwcC12dWUtXHcrJC8udGVzdChhcHApOwogICAgICAgICAgICBjb25zb2xlLmxvZygiaXNBcHAiLCBpc0FwcCk7CiAgICAgICAgICAgIGlmIChpc0FwcCkgZG9jdW1lbnQuYm9keS5jbGFzc05hbWUgPSBhcHA7CiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSA5OgogICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA5OwogICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDEpOwogICAgICAgICAgTWVzc2FnZS5lcnJvcihfY29udGV4dDIudDAubWVzc2FnZSk7CgogICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CgogICAgICAgIGNhc2UgMTM6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICB9CiAgICB9CiAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMSwgOV1dKTsKfSkpKCk7CgpuZXcgVnVlKHsKICByb3V0ZXI6IHJvdXRlciwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICByZXR1cm4gaChBcHApOwogIH0KfSkuJG1vdW50KCIjYXBwIik7"},{"version":3,"sources":["/Users/changluo/Desktop/study-notes/single-spa/single-vue-parent/src/main.js"],"names":["Vue","App","router","ElementUI","Loading","Message","registerApplication","start","getMountedApps","navigateToUrl","config","productionTip","use","loadScript","url","Promise","resolve","reject","script","document","createElement","src","onload","onerror","body","appendChild","registerApplications","name","app","console","log","window","singleVue","activeWhen","customProps","some","props","data","list","id","loading","service","fullscreen","text","addEventListener","pop","isApp","test","className","error","message","close","render","h","$mount"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport ElementUI, { Loading, Message } from \"element-ui\";\nimport \"element-ui/lib/theme-chalk/index.css\";\nimport {\n  registerApplication,\n  start,\n  getMountedApps,\n  navigateToUrl,\n} from \"single-spa\";\nVue.config.productionTip = false;\nVue.use(ElementUI);\n\nasync function loadScript(url) {\n  return new Promise((resolve, reject) => {\n    let script = document.createElement(\"script\");\n    script.src = url;\n    script.onload = resolve;\n    script.onerror = reject;\n    document.body.appendChild(script);\n  });\n}\n// Config with more expressive API\nconst registerApplications = () =>\n  registerApplication({\n    name: \"app-vue-child\",\n    app: async () => {\n      await loadScript(\"http://127.0.0.1:10000/js/chunk-vendors.js\");\n      await loadScript(\"http://127.0.0.1:10000/js/app.js\");\n      console.log(\"window.singleVue\", window.singleVue);\n      return window.singleVue;\n    },\n    activeWhen: \"/vue\",\n    customProps: {\n      some: \"value---\",\n      props: { data: { list: [], id: \"121\" } },\n    },\n  });\n// start();\n\n(async () => {\n  const loading = Loading.service({ fullscreen: true, text: \"正在初始化中\" });\n  try {\n    // await getConfig(); // 获取配置中心的配置参数\n    // await login(); // 处理登录逻辑\n    await registerApplications(); // 注册子系统\n    start();\n    navigateToUrl(\"/vue\"); // 直接跳转到子应用\n    // 切换子系统的时候给body加上对应子系统的 class namespace\n    window.addEventListener(\"single-spa:app-change\", () => {\n      console.log(\"父应用-getMountedApps\", getMountedApps());\n      const app = getMountedApps().pop();\n      console.log(\"getMountedApps()\", getMountedApps());\n      const isApp = /^app-vue-\\w+$/.test(app);\n      console.log(\"isApp\", isApp);\n      if (isApp) document.body.className = app;\n    });\n  } catch (err) {\n    Message.error(err.message);\n  }\n  loading.close();\n})();\n\nnew Vue({\n  router,\n  render: (h) => h(App),\n}).$mount(\"#app\");\n"]}]}